var app=function(){"use strict";function t(){}function e(t){return t()}function o(){return Object.create(null)}function n(t){t.forEach(e)}function r(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let a,s;function l(t,e){return a||(a=document.createElement("a")),a.href=e,t===a.href}function c(t,e){t.appendChild(e)}function d(t,e,o){t.insertBefore(e,o||null)}function p(t){t.parentNode&&t.parentNode.removeChild(t)}function h(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function f(){return u(" ")}function g(t,e,o,n){return t.addEventListener(e,o,n),()=>t.removeEventListener(e,o,n)}function m(t,e,o){null==o?t.removeAttribute(e):t.getAttribute(e)!==o&&t.setAttribute(e,o)}function x(t){const e={};for(const o of t)e[o.name]=o.value;return e}function b(t){s=t}const w=[],y=[];let v=[];const $=[],k=Promise.resolve();let _=!1;function C(t){v.push(t)}const B=new Set;let E=0;function M(){if(0!==E)return;const t=s;do{try{for(;E<w.length;){const t=w[E];E++,b(t),S(t.$$)}}catch(t){throw w.length=0,E=0,t}for(b(null),w.length=0,E=0;y.length;)y.pop()();for(let t=0;t<v.length;t+=1){const e=v[t];B.has(e)||(B.add(e),e())}v.length=0}while(w.length);for(;$.length;)$.pop()();_=!1,B.clear(),b(t)}function S(t){if(null!==t.fragment){t.update(),n(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(C)}}const L=new Set;function z(t,e){const o=t.$$;null!==o.fragment&&(!function(t){const e=[],o=[];v.forEach((n=>-1===t.indexOf(n)?e.push(n):o.push(n))),o.forEach((t=>t())),v=e}(o.after_update),n(o.on_destroy),o.fragment&&o.fragment.d(e),o.on_destroy=o.fragment=null,o.ctx=[])}function T(t,e){-1===t.$$.dirty[0]&&(w.push(t),_||(_=!0,k.then(M)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function H(i,a,l,c,d,h,u,f=[-1]){const g=s;b(i);const m=i.$$={fragment:null,ctx:[],props:h,update:t,not_equal:d,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(a.context||(g?g.$$.context:[])),callbacks:o(),dirty:f,skip_bound:!1,root:a.target||g.$$.root};u&&u(m.root);let x=!1;if(m.ctx=l?l(i,a.props||{},((t,e,...o)=>{const n=o.length?o[0]:e;return m.ctx&&d(m.ctx[t],m.ctx[t]=n)&&(!m.skip_bound&&m.bound[t]&&m.bound[t](n),x&&T(i,t)),e})):[],m.update(),x=!0,n(m.before_update),m.fragment=!!c&&c(m.ctx),a.target){if(a.hydrate){const t=function(t){return Array.from(t.childNodes)}(a.target);m.fragment&&m.fragment.l(t),t.forEach(p)}else m.fragment&&m.fragment.c();a.intro&&((w=i.$$.fragment)&&w.i&&(L.delete(w),w.i(y))),function(t,o,i,a){const{fragment:s,after_update:l}=t.$$;s&&s.m(o,i),a||C((()=>{const o=t.$$.on_mount.map(e).filter(r);t.$$.on_destroy?t.$$.on_destroy.push(...o):n(o),t.$$.on_mount=[]})),l.forEach(C)}(i,a.target,a.anchor,a.customElement),M()}var w,y;b(g)}let O;function j(t,e,o){const n=t.slice();return n[9]=e[o],n}function A(t){let e;return{c(){e=h("div"),e.textContent="Ollie is typing...",m(e,"id","loading-msg")},m(t,o){d(t,e,o)},d(t){t&&p(e)}}}function I(t){let e,o,n=t[9].msg+"";return{c(){e=h("div"),o=u(n),m(e,"id","message-text")},m(t,n){d(t,e,n),c(e,o)},p(t,e){4&e&&n!==(n=t[9].msg+"")&&function(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}(o,n)},d(t){t&&p(e)}}}function P(t){let e,o=t[9].msg+"";return{c(){e=h("div"),m(e,"id","message-text")},m(t,n){d(t,e,n),e.innerHTML=o},p(t,n){4&n&&o!==(o=t[9].msg+"")&&(e.innerHTML=o)},d(t){t&&p(e)}}}function R(t){let e,o,n,r,i,a,s;function u(t,e){return t[9].ollie?P:I}let g=u(t),x=g(t);return{c(){e=h("div"),o=h("img"),i=f(),x.c(),a=f(),m(o,"id","avatar"),l(o.src,n=t[9].ollie?"http://oliviahealth.org/wp-content/uploads/2023/03/olliehead.png":"http://oliviahealth.org/wp-content/uploads/2023/01/white-thick-logo.png")||m(o,"src",n),m(o,"alt","avatar"),m(o,"class",r=t[9].ollie?"":"my-avatar"),m(e,"id","message"),m(e,"class",s=t[9].ollie?"msg-left":"msg-right")},m(t,n){d(t,e,n),c(e,o),c(e,i),x.m(e,null),c(e,a)},p(t,i){4&i&&!l(o.src,n=t[9].ollie?"http://oliviahealth.org/wp-content/uploads/2023/03/olliehead.png":"http://oliviahealth.org/wp-content/uploads/2023/01/white-thick-logo.png")&&m(o,"src",n),4&i&&r!==(r=t[9].ollie?"":"my-avatar")&&m(o,"class",r),g===(g=u(t))&&x?x.p(t,i):(x.d(1),x=g(t),x&&(x.c(),x.m(e,a))),4&i&&s!==(s=t[9].ollie?"msg-left":"msg-right")&&m(e,"class",s)},d(t){t&&p(e),x.d()}}}function q(e){let o,r,i,a,s,u,x,b,w,y,v,$,k,_,C,B,E,M=e[3]&&A(),S=[...e[2]].reverse(),L=[];for(let t=0;t<S.length;t+=1)L[t]=R(j(e,S,t));return{c(){o=h("div"),r=h("div"),r.innerHTML="<p>Ollie</p>",i=f(),a=h("div"),M&&M.c(),s=f();for(let t=0;t<L.length;t+=1)L[t].c();u=f(),x=h("div"),b=h("textarea"),y=f(),v=h("div"),v.innerHTML='<svg viewBox="0 0 512 512" stroke="currentColor" fill="currentColor" stroke-width="0" width="100%" max-height="100%"><path d="M48 448l416-192L48 64v149.333L346 256 48 298.667z"></path></svg>',$=f(),k=h("div"),_=h("img"),this.c=t,m(r,"id","chatBox-header"),m(a,"id","chatBox-content"),m(b,"id","chatbox-textarea"),m(b,"rows",w=Math.min(e[1],4)),m(b,"placeholder","Type message..."),m(v,"class","send-button"),m(x,"id","chatBox-message"),m(o,"id","chatBox"),m(o,"class","fixed-position show"),m(_,"id","button"),m(_,"class","fixed-position clicked"),l(_.src,C="http://oliviahealth.org/wp-content/uploads/2023/03/olliehead.png")||m(_,"src","http://oliviahealth.org/wp-content/uploads/2023/03/olliehead.png"),m(_,"alt","Chat Button")},m(t,n){d(t,o,n),c(o,r),c(o,i),c(o,a),M&&M.m(a,null),c(a,s);for(let t=0;t<L.length;t+=1)L[t]&&L[t].m(a,null);c(o,u),c(o,x),c(x,b),c(x,y),c(x,v),d(t,$,n),d(t,k,n),c(k,_),B||(E=[g(b,"keydown",e[6]),g(v,"click",e[7]),g(_,"click",e[8])],B=!0)},p(t,[e]){if(t[3]?M||(M=A(),M.c(),M.m(a,s)):M&&(M.d(1),M=null),4&e){let o;for(S=[...t[2]].reverse(),o=0;o<S.length;o+=1){const n=j(t,S,o);L[o]?L[o].p(n,e):(L[o]=R(n),L[o].c(),L[o].m(a,null))}for(;o<L.length;o+=1)L[o].d(1);L.length=S.length}2&e&&w!==(w=Math.min(t[1],4))&&m(b,"rows",w)},i:t,o:t,d(t){t&&p(o),M&&M.d(),function(t,e){for(let o=0;o<t.length;o+=1)t[o]&&t[o].d(e)}(L,t),t&&p($),t&&p(k),B=!1,n(E)}}}function N(t,e,o){async function n(t){const e=await fetch("http://127.0.0.1:5000/results",{method:"POST",body:new URLSearchParams({data:t})}).catch((t=>{throw r("Sorry, I am unable to connect to a network. Please check your internet connection."),new Error(`Ollie Chatbox Error: ${t}`)})),o=await e.json(),n=o.confidences.reduce(((t,e,n)=>(e>.3&&t.push({confidence:e,name:o.names[n].replace(/(<([^>]+)>)/gi,""),description:o.descriptions[n].replace(/(<([^>]+)>)/gi,""),address:o.address[2*n+1].replace(/(<([^>]+)>)/gi,""),encodedAddress:o.address[2*n].replace(/(<([^>]+)>)/gi,""),phone:o.phone[n].replace(/(<([^>]+)>)/gi,"")}),t)),[]).sort(((t,e)=>t.confidence-e.confidence));n.length?r(["<p>I've found "+n.length+(n.length>1?" possible matches for you,":" possible match for you, ")," Hover over a facility name for a description</p><br/>",...n.map(((t,e)=>`<p><b>${e+1}. <a title="${t.description}" style="color:white;text-decoration:none;">${t.name}</a></b></p>\n                       <a href="tel:${t.phone.replace(/\(|\)|-/g,"")}" style="color:white;"><div style="display: flex; align-items: center; gap: 5px;"><svg viewBox="0 0 512 512" width="10px" height="10px" stroke="currentColor" fill="currentColor" stroke-width="0" ><path d="M497.39 361.8l-112-48a24 24 0 0 0-28 6.9l-49.6 60.6A370.66 370.66 0 0 1 130.6 204.11l60.6-49.6a23.94 23.94 0 0 0 6.9-28l-48-112A24.16 24.16 0 0 0 122.6.61l-104 24A24 24 0 0 0 0 48c0 256.5 207.9 464 464 464a24 24 0 0 0 23.4-18.6l24-104a24.29 24.29 0 0 0-14.01-27.6z" /></svg><p><small>${t.phone}</small></p></div></a>\n                       <a target="_blank" href="${t.encodedAddress}" style="color:white;"><div style="display: flex; align-items: center; gap: 5px;"><svg viewBox="0 0 512 512" width="10px" height="10px" stroke="currentColor" fill="currentColor" stroke-width="0"><path d="M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z" /></svg><p><small>${t.address}</small></p></div></a>\n                       ${e!=n.length-1?"<br/>":""}`))].join("")):r(o.notFoundMessage??o.winnername)}function r(t){o(3,l=!0),setTimeout((()=>{o(2,s=[...s,{msg:`<p>${t}</p>`,ollie:!0}]),o(3,l=!1)}),750)}let i=0,a=1,s=[],l=!1;return[i,a,s,l,n,r,t=>{const e=t.target?.value;e&&(o(1,a=Math.ceil(e.length/20)),13!==t.keyCode||t.shiftKey||(t.preventDefault(),o(2,s=[...s,{msg:e,ollie:!1}]),n(e),o(1,a=1),t.target.value=""))},()=>{const t=document.querySelector("my-card").shadowRoot.querySelector("textarea"),e=t?.value;e&&(o(2,s=[...s,{msg:e,ollie:!1}]),n(e),t.value="",o(1,a=1))},t=>{t.preventDefault(),t.stopPropagation();const e=document.querySelector("my-card").shadowRoot,n=e.getElementById("chatBox"),a=e.getElementById("button"),s=e.getElementById("chatbox-textarea");a.classList.toggle("clicked"),n.classList.toggle("show"),s.focus(),0===i&&(r("<p>Hi! I'm Ollie, your virtual assistant for the OliviaHealth network. How can I help you?</p>"),o(0,i+=1))}]}"function"==typeof HTMLElement&&(O=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(e).filter(r);for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,o){this[t]=o}disconnectedCallback(){n(this.$$.on_disconnect)}$destroy(){z(this,1),this.$destroy=t}$on(e,o){if(!r(o))return t;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(o),()=>{const t=n.indexOf(o);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});class D extends O{constructor(t){super();const e=document.createElement("style");e.textContent='img{width:100vw}.send-button{color:white;height:25px;width:25px}.send-button:hover{color:whitesmoke;cursor:pointer}#loading-msg{padding:5px 10px 5px 10px;font-size:12px;color:lightgray;font-family:"Comic Sans MS"}.fixed-position{position:fixed;bottom:20px;right:20px}#avatar{width:35px;height:35px}.my-avatar{background-color:#3b3a70;width:35px;min-width:35px;border-radius:50%;object-fit:contain}.msg-right{flex-direction:row-reverse;align-self:end}.msg-left{align-self:start}.msg-right>div{background:#d3d3d3;color:black}.msg-left>div{background:#5b59d3;color:white}#message-text{font-family:"Comic Sans MS";font-size:16px;margin:0;padding:8px;border-radius:6px}p{font-size:small;margin:0px;padding:0px}#message{max-width:80%;display:flex;align-items:end;gap:8px;padding:16px 8px}#chatBox{z-index:9999;overflow:hidden;height:70%;width:400px;border-radius:16px;transition:transform 200ms;position:fixed;bottom:90px;right:90px;transform-origin:bottom right;display:flex;flex-direction:column;justify-content:space-between;box-shadow:8px 8px 32px rgba(1, 1, 1, 0.5)}#chatBox-header{position:relative;color:#9593ff;font-family:"Comic Sans MS";font-weight:600;font-size:24px;padding:8px;background-color:rgb(255, 255, 255);border-top-right-radius:inherit;border-top-left-radius:inherit;box-shadow:0px 1.6px 3.2px 0px rgba(1, 1, 1, 0.2)}#chatBox-header>p{padding:0;font-size:24px;margin:0 0 0 10px}#chatBox-content{display:flex;flex-direction:column-reverse;overflow-y:auto;overflow-x:hidden;word-wrap:anywhere}#chatBox-message{display:flex;justify-content:space-around;padding:8px 0px 8px 8px;background:#9593f8;border-bottom-right-radius:inherit;border-bottom-left-radius:inherit}#chatBox-message>textarea{font-family:\'Comic Sans MS\';border-radius:16px;padding:2px 10px 0px 10px;width:70%;background:white;outline:none;border:none;resize:none;scrollbar-width:none;box-shadow:1.6px -1.6px 3.2px 0px rgba(1, 1, 1, 0.2)}#chatBox-content{background-color:rgb(246, 246, 246);flex:1}.show{transform:translate(120px, 175px) scale(0)}#button{aspect-ratio:1 / 1;width:70px;color:black;border-radius:50%;cursor:pointer;box-shadow:0px 0px 5px #3b3a70;transition:transform 400ms}.clicked{transform:rotate(360deg);fill:black}@media(max-width:480px){#chatBox{overflow:hidden;width:80%;border-radius:16px;transition:transform 200ms;position:fixed;right:40px;transform-origin:bottom right;display:flex;flex-direction:column;justify-content:space-between;box-shadow:8px 8px 32px rgba(1, 1, 1, 0.5)}}',this.shadowRoot.appendChild(e),H(this,{target:this.shadowRoot,props:x(this.attributes),customElement:!0},N,q,i,{},null),t&&t.target&&d(t.target,this,t.anchor)}}customElements.define("my-card",D);return new D({target:document.body})}();
//# sourceMappingURL=bundle.js.map